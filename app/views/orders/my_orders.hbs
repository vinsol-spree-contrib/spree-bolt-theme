{{> search}}
{{> header}}
{{> login_form}}
{{> signup_form}}
{{> menu_container}}
{{> cart}}

<section class="orders-page-wrapper">
  <div class="container">
    <h1 class="decorated-heading text-center">
      <span class="text-uppercase">My Orders</span>
    </h1>
    <div class="row">
      <div class="col-md-6 col-md-offset-3 orders-inner">
        <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">

          {{# each orders}}
            {{#isOrderComplete completed_at}}
              <div class="panel single-order-detail">
                <div class="panel-heading order-header" role="tab" id="heading_{{number}}">
                  <h4 class="panel-title">
                    <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse_{{number}}" aria-expanded="true" aria-controls="collapse_{{number}}">
                      {{number}}
                    </a>
                  </h4>
                </div>
                <div id="collapse_{{id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading_{{id}}">
                  <div class="panel-body">
                    <ul>
                      <li><b>Date:</b> <span>{{#formatDate completed_at}}{{body}}{{/formatDate}}</span></li>
                      <li><b>Status:</b> <span>{{state}}</span></li>
                      <li><b>Payment State:</b> <span>{{payment_state}}</span></li>
                      <li><b>Shipment State:</b> <span>{{shipment_state}}</span></li>
                      <li><b>Total Items:</b> <span>{{item_count}}</span></li>
                      <li><b>Total:</b> <span>${{total}}</span></li>
                    </ul>
                    <a href="#order-{{number}}" class="btn-action btn-dark" data-toggle="modal">View Summary</a>
                  </div>
                </div>
              </div>

              <div class="modal fade order-details-modal" id="order-{{number}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog modal-lg normal-modal" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                      <h4 class="modal-title" id="myModalLabel">Order {{number}}</h4>
                    </div>
                    <div class="modal-body">
                      <div class="row">
                        <div class="col-md-6">
                          <h3>Shipping Address</h3>
                          {{#showAddress ship_address_id ../../addresses}}
                            <div class="orders-container">
                              <div class="row">
                                <div class="col-md-4">Name <span class="pull-right">:</span></div>
                                <div class="col-md-8 p-l-0">{{firstname}} {{lastname}}</div>
                              </div>
                              <div class="row">
                                <div class="col-md-4">Address 1 <span class="pull-right">:</span></div>
                                <div class="col-md-8 p-l-0">{{address1}}</div>
                              </div>
                              <div class="row">
                                <div class="col-md-4">Address 2 <span class="pull-right">:</span></div>
                                <div class="col-md-8 p-l-0">{{address2}}</div>
                              </div>
                              <div class="row">
                                <div class="col-md-4">City <span class="pull-right">:</span></div>
                                <div class="col-md-8 p-l-0">{{city}}</div>
                              </div>
                              <div class="row">
                                <div class="col-md-4">Phone <span class="pull-right">:</span></div>
                                <div class="col-md-8 p-l-0">{{phone}}</div>
                              </div>
                              <div class="row">
                                <div class="col-md-4">Postal Code <span class="pull-right">:</span></div>
                                <div class="col-md-8 p-l-0">{{zipcode}}</div>
                              </div>
                            </div>
                          {{/showAddress}}
                        </div>
                        <div class="col-md-6">
                          <h3>Billing Address</h3>
                          {{#showAddress bill_address_id ../../addresses}}
                            <div class="orders-container">
                              <div class="row">
                                <div class="col-md-4">Name <span class="pull-right">:</span></div>
                                <div class="col-md-8 p-l-0">{{firstname}} {{lastname}}</div>
                              </div>
                              <div class="row">
                                <div class="col-md-4">Address 1 <span class="pull-right">:</span></div>
                                <div class="col-md-8 p-l-0">{{address1}}</div>
                              </div>
                              <div class="row">
                                <div class="col-md-4">Address 2 <span class="pull-right">:</span></div>
                                <div class="col-md-8 p-l-0">{{address2}}</div>
                              </div>
                              <div class="row">
                                <div class="col-md-4">City <span class="pull-right">:</span></div>
                                <div class="col-md-8 p-l-0">{{city}}</div>
                              </div>
                              <div class="row">
                                <div class="col-md-4">Phone <span class="pull-right">:</span></div>
                                <div class="col-md-8 p-l-0">{{phone}}</div>
                              </div>
                              <div class="row">
                                <div class="col-md-4">Postal Code <span class="pull-right">:</span></div>
                                <div class="col-md-8 p-l-0">{{zipcode}}</div>
                              </div>
                            </div>
                          {{/showAddress}}
                        </div>
                      </div>
                      <div class="row m-t-20">
                        <div class="col-md-6">
                          <h3>Shipments Information</h3>
                          {{#showShipping shipment_ids ../../shipments ../../shipping_rates}}
                            <div class="orders-container">
                              <div class="row">
                                <div class="col-md-4">Via <span class="pull-right">:</span></div>
                                <div class="col-md-8 p-l-0">{{name}}</div>
                              </div>
                              <div class="row">
                                <div class="col-md-4">Rate <span class="pull-right">:</span></div>
                                <div class="col-md-8 p-l-0">{{display_cost}}</div>
                              </div>
                            </div>
                          {{/showShipping}}
                        </div>
                        <div class="col-md-6">
                          <h3>Payment Information</h3>
                          {{#showPayment payment_ids ../../payments ../../payment_methods}}
                            <div class="orders-container">
                              <div class="row">
                                <div class="col-md-4">Name <span class="pull-right">:</span></div>
                                <div class="col-md-8 p-l-0">{{name}}</div>
                              </div>
                              <div class="row">
                                <div class="col-md-4">Description <span class="pull-right">:</span></div>
                                <div class="col-md-8 p-l-0">{{description}}</div>
                              </div>
                            </div>
                          {{/showPayment}}
                        </div>
                      </div>
                      <hr>
                      <div class="row m-t-20 orders-header">
                        <div class="col-md-7">
                          <h4>Item</h4>
                        </div>
                        <div class="col-md-2 text-center">
                          <h4>Price</h4>
                        </div>
                        <div class="col-md-2 text-center">
                          <h4>Qty</h4>
                        </div>
                        <div class="col-md-1 text-right">
                          <h4>Total</h4>
                        </div>
                      </div>
                      {{#each line_item_ids}}
                        <div class="row m-t-20">
                          {{#showVariants this ../../../line_items ../../../variants}}
                            <div class="col-md-7">
                              <a href={{#productUrl variant.id}}{{body}}{{/productUrl}}>{{variant.name}}</a>
                            </div>
                            <div class="col-md-2 text-center">
                              {{variant.display_price}}
                            </div>
                            <div class="col-md-2 text-center">
                              {{line_item.quantity}}
                            </div>
                            <div class="col-md-1 text-right">
                              ${{line_item.total}}
                            </div>
                          {{/showVariants}}
                        </div>
                      {{/each}}
                    </div>
                  </div>
                </div>
              </div>
            {{/isOrderComplete}}
          {{/each}}

        </div>
      </div>
    </div>
  </div>
</section>

{{> newsletter}}
{{> scroll_top}}
{{> footer}}